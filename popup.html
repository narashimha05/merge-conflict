<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Meet Slide Capture</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="popup-container">
      <!-- Header -->
      <div class="popup-header">
        <div class="logo">
          <img src="./icons/AutoCapture.png" alt="Auto Capture Logo" width="40" height="40" />
        </div>
        <div>
          <h1>Auto Capture</h1>
          <div class="subtitle">Auto-capture Google Meet slides</div>
        </div>
      </div>

      <!-- User Profile -->
      <div class="user-profile" id="user-profile-section">
        <div class="user-avatar" id="user-avatar"></div>
        <div class="user-info">
          <div class="user-name" id="user-name">Loading...</div>
          <!-- <span class="user-tier" id="user-tier">Free</span> -->
        </div>
        <svg
          class="dropdown-icon"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>

      <!-- Account Details (no paid tiers) -->
      <div
        class="subscription-details"
        id="subscription-details"
        style="display: none"
      >
        <!-- <div class="detail-row">
          <span class="detail-label">Plan</span>
          <span class="detail-value" id="plan-type">Free (all features)</span>
        </div> -->
        <div class="detail-row" id="status-row" style="display: none">
          <span class="detail-label">Status</span>
          <span class="detail-value" id="subscription-status">Active</span>
        </div>
        <div class="detail-row" id="next-billing-row" style="display: none">
          <span class="detail-label">Next Billing</span>
          <span class="detail-value" id="next-billing-date">--</span>
        </div>
        <div class="detail-row" id="started-row" style="display: none">
          <span class="detail-label">Member Since</span>
          <span class="detail-value" id="subscription-start">--</span>
        </div>
        <button
          class="btn btn-secondary btn-full"
          id="logout-btn"
          style="margin-top: 10px"
        >
          Logout
        </button>
      </div>

      <!-- Status Card -->
      <div class="status-card">
        <div class="status-row">
          <div class="status-indicator">
            <div class="status-dot" id="status-dot"></div>
            <span class="status-label">Status</span>
          </div>
          <span class="status-text" id="status-text">Stopped</span>
        </div>
        <div class="stats-row">
          <div class="stat-item">
            <div class="stat-value" id="capture-count">0</div>
            <div class="stat-label">Captures</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="session-time">--</div>
            <div class="stat-label">Last Capture</div>
          </div>
        </div>
      </div>

      <!-- Control Buttons -->
      <div class="controls">
        <button class="btn btn-primary" id="toggle-capture">
          <svg viewBox="0 0 24 24" fill="currentColor" id="toggle-icon">
            <polygon points="5,3 19,12 5,21" />
          </svg>
          <span id="toggle-text">Start</span>
        </button>
      </div>

      <button class="btn btn-capture btn-full" id="capture-now">
        <svg
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="12" cy="12" r="10" />
          <circle cx="12" cy="12" r="4" fill="currentColor" />
        </svg>
        Capture Now
      </button>

      <!-- Links -->
      <div class="links-row">
        <a href="gallery.html" target="_blank" class="link-btn">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="3" width="7" height="7" />
            <rect x="14" y="3" width="7" height="7" />
            <rect x="3" y="14" width="7" height="7" />
            <rect x="14" y="14" width="7" height="7" />
          </svg>
          Gallery
        </a>
        <a href="options.html" target="_blank" class="link-btn">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="3" />
            <path
              d="M12 1v4m0 14v4m-9-9h4m14 0h4m-4.2-5.8l-2.8 2.8m-8 0L4.2 6.2m0 11.6l2.8-2.8m8 0l2.8 2.8"
            />
          </svg>
          Settings
          <svg
            class="lock-icon"
            viewBox="0 0 24 24"
            fill="currentColor"
            width="12"
            height="12"
          >
            <path
              d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"
            />
          </svg>
        </a>
      </div>

      <!-- Last Capture -->
      <div class="last-capture">
        Last capture: <span id="last-capture">None</span>
      </div>
    </div>
    <script src="config.js"></script>
    <script src="supabase.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
