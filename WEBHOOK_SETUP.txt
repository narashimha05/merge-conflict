DODOPAY WEBHOOK SETUP FOR LIVE MODE
====================================

Your Supabase Edge Function is already deployed and ready.

STEPS TO CONFIGURE IN DODOPAY DASHBOARD:
-----------------------------------------

1. Go to: https://dashboard.dodopayments.com
   - Switch to LIVE mode (toggle in top right)

2. Navigate to: Settings → Webhooks → Add Webhook

3. Webhook URL:
   https://[YOUR-PROJECT-ID].supabase.co/functions/v1/dodopay-webhook
   
   (Replace [YOUR-PROJECT-ID] with your actual Supabase project ID)

4. Select these events:
   ☑ payment.succeeded
   ☑ subscription.active
   ☑ subscription.updated
   ☑ subscription.renewed
   ☑ subscription.canceled
   ☑ payment.failed

5. Save the webhook

6. Copy the Webhook Secret that DodoPay generates

7. In Supabase Dashboard:
   - Go to Project Settings → Edge Functions
   - Add environment variable:
     Name: DODOPAY_WEBHOOK_SECRET
     Value: [paste the webhook secret from step 6]

8. Test the webhook:
   - Try a test purchase in your extension
   - Check Supabase Edge Function logs to verify webhook received
   - Verify database updates correctly

TROUBLESHOOTING:
----------------
- If webhook not firing: Check URL is correct and events are selected
- If webhook failing: Check Edge Function logs in Supabase Dashboard
- If database not updating: Verify customer_email matches logged-in user

Your webhook handler already supports:
- Nested customer email (eventData.customer?.email)
- Multiple event types
- Database updates for Pro subscription
